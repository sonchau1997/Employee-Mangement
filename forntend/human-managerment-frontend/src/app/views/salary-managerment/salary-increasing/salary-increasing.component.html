<div class="card mt-2">
    <div class="card-header">
        <div class="row">
            <div class="col">
                <span>Danh sách nhân viên: </span>
            </div>
        </div>
    </div>
    <div class="card-body">
        <ngx-datatable class="material" [rows]="employees" [rowHeight]="auto" [columnMode]="'force'"
            [sortType]="'multi'" [headerHeight]="50" [footerHeight]="50" [externalPaging]="true"
            [count]="paging.totalItems" [offset]="paging.page - 1" [limit]="paging.pageLimit"
            (page)="loadEmpWithJobInfor($event)">
            <ngx-datatable-column name="Nhân viên">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    <!-- <a (click)="isCollapsed = !isCollapsed" [attr.aria-expanded]="!isCollapsed"
                        aria-controls="collapseBasic">{{ row.name}}</a> -->
                    <mat-accordion>
                        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                            <mat-expansion-panel-header>
                                <mat-panel-title>
                                    <span><i class="fa fa-user"></i> &nbsp; {{ row.lastname}} {{ row.firstname}}</span>
                                </mat-panel-title>

                            </mat-expansion-panel-header>
                            <div class="row">
                                <div class="col-2">
                                    Công việc: {{ row.job.jobTitle}}
                                </div>
                                <div class="col-2">
                                    Cấp độ hiện tại: <strong style="color: red;">{{ row.jobLevel}}</strong>
                                </div>
                                <div class="col-2">
                                    <div *ngIf="isCountClick">
                                        <input #jobLevel style="width: 35px;" type="number" min="1" max="9">
                                        <button class="btn btn-outline-info btn-sm"><i title="Nâng lương"
                                                (click)="increaseSalary(row.id,jobLevel.value)"
                                                class="fa fa-check text-primary mr-1 pointer"></i></button>
                                    </div>

                                    <div *ngIf="!isCountClick">
                                        <i title="Nâng lương" (click)="isCountClick = !isCountClick"
                                            class="fa fa-dollar text-primary mr-1 pointer" title="Nâng lương"></i>
                                    </div>
                                </div>
                                <div class="col"></div>
                            </div>

                            <div class="row mt-2" style="border: solid 1px;">
                                <div class="col">
                                    Cấp 1: <span style="color: blue;">{{ row.job.jobLevel.level1}}</span>
                                </div>
                                <div class="col">
                                    Cấp 2: <span style="color: blue;">{{ row.job.jobLevel.level2}}</span>
                                </div>
                                <div class="col">
                                    Cấp 3: <span style="color: blue;">{{ row.job.jobLevel.level3}}</span>
                                </div>
                                <div class="col">
                                    Cấp 4: <span style="color: blue;">{{ row.job.jobLevel.level4}}</span>
                                </div>
                                <div class="col">
                                    Cấp 5: <span style="color: blue;">{{ row.job.jobLevel.level5}}</span>
                                </div>
                                <div class="col">
                                    Cấp 6: <span style="color: blue;">{{ row.job.jobLevel.level6}}</span>
                                </div>
                                <div class="col">
                                    Cấp 7: <span style="color: blue;">{{ row.job.jobLevel.level7}}</span>
                                </div>
                                <div class="col">
                                    Cấp 8: <span style="color: blue;">{{ row.job.jobLevel.level8}}</span>
                                </div>
                                <div class="col">
                                    Cấp 9: <span style="color: blue;">{{ row.job.jobLevel.level9}}</span>
                                </div>
                            </div>
                        </mat-expansion-panel>
                    </mat-accordion>
                </ng-template>
            </ngx-datatable-column>
        </ngx-datatable>
    </div>
</div>

<ng-template #notifyModalTemplate>
    <div class="modal-body" style="text-align: center;">
        {{message}}
        <button type="button" class="close pull-right" aria-label="Close" (click)="notifyModalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
</ng-template>